<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Switching to Caddy</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="css/pandoc.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Switching to Caddy</h1>
</header>
<p>I decided to upgrade my ancient Fedora 25 VPS to Fedora 33 this weekend. I couldn’t get the in-place upgrade to work across so many releases so I just blew away the entire server and started fresh. While typing away, I remembered I had heard some good stuff about <a href="https://caddyserver.com/">Caddy</a>. I was also getting annoyed manually refreshing my <a href="https://letsencrypt.org/">Let’s Encrypt</a> certs every three months for <a href="https://www.lighttpd.net/">lighttpd</a>. I figured why not give Caddy a try?</p>
<p>Turns out caddy is a joy compared to lighttpd. Compare my old lighttpd notes to the new caddy config:</p>
<p>lighttpd:</p>
<p><img src="../examples/caddy/lighttpd.png" style="width:100.0%" /></p>
<p>Caddyfile:</p>
<pre><code>dxuuu.xyz

root * /var/www/dxuuu.xyz
file_server</code></pre>
<p>And caddy automatically renews https certs!</p>
<p>One final note: I originally chose lighttpd out of resource concerns b/c I’m running this site on a $5/mo DigitalOcean droplet. A brief inspection reveals caddy is doing just fine:</p>
<pre><code>[dxu@shiva ~]$ systemctl status caddy
● caddy.service - Caddy web server
     Loaded: loaded (/usr/lib/systemd/system/caddy.service; enabled; vendor preset: disabled)
     Active: active (running) since Sat 2021-03-20 21:53:36 UTC; 12min ago
       Docs: https://caddyserver.com/docs/
    Process: 6395 ExecStartPre=/usr/bin/caddy validate --config /etc/caddy/Caddyfile (code=exited, status=&gt;
   Main PID: 6401 (caddy)
      Tasks: 7 (limit: 1125)
     Memory: 29.1M
        CPU: 227ms
     CGroup: /system.slice/caddy.service
             └─6401 /usr/bin/caddy run --environ --config /etc/caddy/Caddyfile</code></pre>
</body>
</html>
